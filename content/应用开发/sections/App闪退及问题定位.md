---
title: App闪退及问题定位
---
### App闪退及问题定位


Do开发的App因为经过很长时间的和很多用户的打磨，闪退已经很少发生了，但是不可能绝对杜绝。
<mark>闪退是App最严重的问题，我们会第一时间和你一起定位和解决闪退问题。</mark>

### 概述
应用崩溃有多种情况和原因，有一些情况的是可以记录下崩溃日志的，你可以检查日志来定位问题，或者把日志发给官方来帮忙解决。

> 1.调试版本的崩溃日志可以通过Logger来查看，App闪退后，再重新打开，就能在Logger里查看到。
>	2.发布版本的崩溃日志可以通过在手机里的文件系统中找到，大概目录结构是 'sdcard/包名/应用ID/Log/crashLog.text'

下面是分平台介绍常见崩溃情况和尝试解决方法

### Android
Android常见的崩溃有三种情况：

> 1.发布版一启动就闪退或调试版本点击“进入”后马上闪退。
> 2.发布版和调试版本在正常运行一段时间后提示“很抱歉，xxx已停止运行",然后点击“确定”后就退出了
> 3.发布版和调试版本在正常运行一段时间后逐渐变慢，UI卡住，然后会提示“xxx已无响应，是否等待”，然后会退出等。

对应这三种情况的原因和解决办法大概是：

#### <font color ='#40A977'>**1.**</font> 缺少组件或版本过低，这个在Logger里可能会看到错误提示“xxx组件 undefined"。通常添加相应的组件，或更新核心的几个组件（do_Page,do_App,do_Global)再重新打包就能解决

#### <font color ='#40A977'>**2.**</font> 这种情况通常是有闪退日志的，发生的原因有二种:

>可能是某个函数的参数格式不对或数据不对，数组越界之类的，可以通过查看日志，修改参数之类的来解决。但是即使自己解决了，也麻烦把问题反馈给我们官方，我们官方有义务规避这种闪退。
>内存outofmemory，Android的图片高分辨率占用内存非常多，如果你一个页面里太多大图片来不及释放就会闪退，图片使用的原则是尽量使用和imageview大小差不多分辨率的图片，比如listview里每一行的iamgeview通常都只有100*100左右大，那么里面加载的图片也弄成100*100，而不是加载1000*1000的图片。

#### <font color ='#40A977'>**3.**</font> 通常是在ui线程里做太多操作，比如js代码做太多循环或其它耗时操作。Do提供了很多异步方法来处理耗时，而不是用同步方法。


### IOS
IOS常见的崩溃现象有二种情况：

> 1.发布版和调试版本在在某一个固定的页面固定的操作下固定的闪退
> 2.发布版和调试版本在正常运行一段时间，随机在某个位置或操作闪退

对应这二种情况的原因和解决办法大概是：

#### <font color ='#40A977'>**1.**</font> 这种情况通常是有闪退日志的，发生的原因有可能是某个函数的参数格式不对或数据不对，数组越界之类的，可以通过查看日志，修改参数之类的来解决。但是即使自己解决了，也麻烦把问题反馈给我们官方，我们官方有义务规避这种闪退。

#### <font color ='#40A977'>**2.**</font> 内存outofmemory，通常也是图片导致，如果你一个页面里太多大图片来不及释放就会闪退，图片使用的原则是尽量使用和imageview大小差不多分辨率的图片，比如listview里每一行的iamgeview通常都只有100*100左右大，那么里面加载的图片也弄成100*100，而不是加载1000*1000的图片。

### 最佳实践
以下列出一些闪退的可能性：

> 参数格式不对(api 定义的是个数组，用户传了个字符串)
> 内存问题，（a,图片过大，占用内存，b,快速来回打开，或者关闭page 导致内存无法及时释放，如传个器，timer 没有调用stop方法）
> 文件路径问题，如模板参数为"cell/c1.ui",代码中写成了"cell/c2.ui"，路径没写对可能闪退
> 数组越界，如多模板，template 定义了一个模板，用listdata 赋值的时候，template的值写了大于1的值
> 某个组件内存占用，长期无法释放（不常见）

[回到顶部](#top)
